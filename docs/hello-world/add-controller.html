<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>コントローラー | Spring Boot 入門</title>
    <meta name="description" content="">
    
    
    <link rel="preload" href="/spring-boot-primer/assets/css/0.styles.9f3a32a1.css" as="style"><link rel="preload" href="/spring-boot-primer/assets/js/app.f4a996cb.js" as="script"><link rel="preload" href="/spring-boot-primer/assets/js/5.a86f6d2d.js" as="script"><link rel="prefetch" href="/spring-boot-primer/assets/js/2.5d10b19e.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/3.b3d347d1.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/4.86a5f2f4.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/6.fc623400.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/7.9ae70e09.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/8.68c68e2b.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/9.6664dbbb.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/10.007b9541.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/11.5d9a6aff.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/12.57bd68cc.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/13.e771d4bd.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/14.92362eae.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/15.5da2b184.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/16.b2fcfbef.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/17.6da41cc5.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/18.45cc66ae.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/19.e63fdcf0.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/20.b7ec4c5d.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/21.a81cd2e6.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/22.662f09e4.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/23.b95a2ff1.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/24.ed7ebb3f.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/25.3a460d05.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/26.ab237c16.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/27.73b7ca48.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/28.80fa54fe.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/29.91cdead0.js"><link rel="prefetch" href="/spring-boot-primer/assets/js/30.eaab630d.js">
    <link rel="stylesheet" href="/spring-boot-primer/assets/css/0.styles.9f3a32a1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/spring-boot-primer/" class="home-link router-link-active"><!----><span class="site-name">
      Spring Boot 入門
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/spring-boot-primer/settings/" class="nav-link">開発環境構築</a></div><div class="nav-item"><a href="/spring-boot-primer/hello-world/" class="nav-link router-link-active">Hello world!</a></div><div class="nav-item"><a href="/spring-boot-primer/tutorial/" class="nav-link">チュートリアル</a></div><div class="nav-item"><a href="/spring-boot-primer/practice/" class="nav-link">演習問題</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/spring-boot-primer/settings/" class="nav-link">開発環境構築</a></div><div class="nav-item"><a href="/spring-boot-primer/hello-world/" class="nav-link router-link-active">Hello world!</a></div><div class="nav-item"><a href="/spring-boot-primer/tutorial/" class="nav-link">チュートリアル</a></div><div class="nav-item"><a href="/spring-boot-primer/practice/" class="nav-link">演習問題</a></div><!----></nav><ul class="sidebar-links"><li><a href="/spring-boot-primer/hello-world/" class="sidebar-link">Hello world!</a></li><li><a href="/spring-boot-primer/hello-world/web-application-framework.html" class="sidebar-link">WAFの仕組み</a></li><li><a href="/spring-boot-primer/hello-world/create-new-project.html" class="sidebar-link">プロジェクトの新規作成</a></li><li><a href="/spring-boot-primer/hello-world/ide-settings.html" class="sidebar-link">IDE の設定</a></li><li><a href="/spring-boot-primer/hello-world/application-properties.html" class="sidebar-link">アプリケーションの設定</a></li><li><a href="/spring-boot-primer/hello-world/add-controller.html" class="active sidebar-link">コントローラー</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-boot-primer/hello-world/add-controller.html#パッケージの追加" class="sidebar-link">パッケージの追加</a></li><li class="sidebar-sub-header"><a href="/spring-boot-primer/hello-world/add-controller.html#コントローラークラス" class="sidebar-link">コントローラークラス</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/spring-boot-primer/hello-world/add-controller.html#ファイルの追加" class="sidebar-link">ファイルの追加</a></li><li class="sidebar-sub-header"><a href="/spring-boot-primer/hello-world/add-controller.html#コード解説" class="sidebar-link">コード解説</a></li></ul></li></ul></li><li><a href="/spring-boot-primer/hello-world/add-template.html" class="sidebar-link">テンプレート</a></li><li><a href="/spring-boot-primer/hello-world/run-application.html" class="sidebar-link">アプリを起動する</a></li></ul></div><div class="page"><div class="content"><h1 id="コントローラー"><a href="#コントローラー" aria-hidden="true" class="header-anchor">#</a> コントローラー</h1><p>前置きが少し長くなりましたが、ここから本格的にコードを書いていきます。</p><p>まずはコントローラークラスを追加します。</p><h2 id="パッケージの追加"><a href="#パッケージの追加" aria-hidden="true" class="header-anchor">#</a> パッケージの追加</h2><p>中規模以上のプロジェクトでは MVC やそのほかのクラスの役割に応じてディレクトリ（パッケージ）を分けるのが普通です。今回のチュートリアルは小規模ですがやり方に慣れるために、コントローラークラスを配置するパッケージを作成します。</p><p>Package Explorer の「com.example.search」を右クリックするとメニューが表示されますので、「New」→「Package」を選択してください。</p><p><img src="/spring-boot-primer/assets/img/sts-add-controller-1.3505a041.png" alt="STS Add Controller"></p><p>ダイアログが表示されますので、「Name」に「com.example.search.controllers」と入力してください。「controllers」だけでなく「com.example.search.」も必要ですので注意しましょう。</p><p><img src="/spring-boot-primer/assets/img/sts-add-controller-2.a0064abd.png" alt="STS Add Controller"></p><p>入力できたら「Finish」をクリックして完了です。</p><h2 id="コントローラークラス"><a href="#コントローラークラス" aria-hidden="true" class="header-anchor">#</a> コントローラークラス</h2><h3 id="ファイルの追加"><a href="#ファイルの追加" aria-hidden="true" class="header-anchor">#</a> ファイルの追加</h3><p>Package Explorer を確認してください。「com.example.search」の下に「controllers」というパッケージが作成されているはずです。</p><p>次はその「controllers」を右クリックして「New」→「Class」を選択します。ダイアログが表示されますので「Name」に「HelloController」と入力して「Finish」をクリックします。</p><p><code>HelloController.java</code> が作成されているはずですので、以下のコードを書いてください。ただ書き始める前にひとつ注意点です。<strong>import 文を手入力しない</strong>ようにしてください。import 文はエディタの機能で自動補完できますし、そちらの方が早くて正確です。とりあえず import 文は飛ばして入力しましょう。</p><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">package</span> com<span class="token punctuation">.</span>example<span class="token punctuation">.</span>search<span class="token punctuation">.</span>controllers<span class="token punctuation">;</span>

<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>stereotype<span class="token punctuation">.</span>Controller<span class="token punctuation">;</span>
<span class="token keyword">import</span> org<span class="token punctuation">.</span>springframework<span class="token punctuation">.</span>web<span class="token punctuation">.</span>bind<span class="token punctuation">.</span>annotation<span class="token punctuation">.</span>GetMapping<span class="token punctuation">;</span>

<span class="token annotation punctuation">@Controller</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">HelloController</span> <span class="token punctuation">{</span>

    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span><span class="token string">&quot;/hello&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> String <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><p>import 文を飛ばして入力できたら「@Controller」「@GetMapping」の下にエラーを示す赤い下線が引かれているはずです。ここでショートカットキー <code>Ctrl + Shift + O</code> を入力すると、import 文が自動的に挿入されます。エラーの赤線も消えたでしょう。</p><h3 id="コード解説"><a href="#コード解説" aria-hidden="true" class="header-anchor">#</a> コード解説</h3><p>さて、ここで少し先ほど追加したコードの説明をします。</p><h4 id="アノテーション"><a href="#アノテーション" aria-hidden="true" class="header-anchor">#</a> アノテーション</h4><p>だいたい基本的なコードというか、クラスにメソッドが定義されているだけですが、「<strong>@Controller</strong>」「<strong>@GetMapping</strong>」という記述が目に止まるのではないでしょうか。</p><p>この「@Xxx」という言語機能は<strong>アノテーション</strong>と言います。アノテーションはクラスやプロパティ、メソッドに付加することができ、コンパイル時にアノテーション側で定義した特定の処理を実行するための機能です。</p><p>「@Controller」と「@GetMapping」は import 文を見てわかるように、どちらも Spring フレームワークが提供するアノテーションです。クラスに「@Contorller」アノテーションが付加されているとコンパイル時に HTTP リクエストの受け取りなど Spring フレームワーク内でコントローラークラスが持つべきとされる機能が追加されます[^1]。</p><p>続いて「@GetMapping」ですが、これはルーティングの機能を果たしています。つまり、引数の URL と Java 側のメソッドを紐づけます。結果として URL への GET リクエストを受信したときにメソッドが実行されます。ちなみにご想像の通り「@PostMapping」もあります。</p><p>上記の例でいうと、アプリケーションが <code>/hello</code> への GET リクエストを受け取ると <code>index</code> メソッドが実行されます。</p><p>メソッド名に関しては Spring 側での規約はありません。Java 的に OK なメソッド名であれば任意の名前で構いません。アノテーションさえ付いていればリクエストとのマッピングが行われます。</p><p>つまり、</p><ul><li>クラスに「@Controller」を付ける。</li><li>メソッドに「@GetMapping」「@PostMapping」を付けて リクエスト URL + HTTP メソッドを紐付ける。</li></ul><p>というのが Spring におけるルーティングのパターンです。</p><p>[^1]: コントローラーとしての基本機能が定義された親クラスを継承するスタイルでも同様のことは実現できそうですが、一般的に継承関係が深くなると複雑性が増してよろしくないと言われていますので、アノテーションを用いた Spring のスタイルはよりシンプルな表現と言えるでしょう。</p><h4 id="戻り値"><a href="#戻り値" aria-hidden="true" class="header-anchor">#</a> 戻り値</h4><p>次に戻り値を見てみましょう。</p><div class="language-java extra-class"><pre class="language-java"><code><span class="token keyword">return</span> <span class="token string">&quot;hello&quot;</span><span class="token punctuation">;</span>
</code></pre></div><p><code>&quot;hello&quot;</code> という文字列を返していますね。ただ、だからと言ってクライアント側に <code>&quot;hello&quot;</code> という文字列がレスポンスされるわけではありません。</p><p>「@GetMapping」や「@PostMapping」でリクエストマッピングがされたメソッドが返す文字列は、<strong>テンプレートの名前と解釈されます</strong>。</p><p><code>src/main/resources/templates</code> の下に配置された <code>hello.html</code>（拡張子は使用するテンプレートエンジン次第ですが）が呼び出され、レスポンスの HTML が生成されるのです。</p><p>では、次のページで実際にテンプレートを作成しましょう。</p></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/spring-boot-primer/hello-world/application-properties.html" class="prev">
          アプリケーションの設定
        </a></span><span class="next"><a href="/spring-boot-primer/hello-world/add-template.html">
          テンプレート
        </a> →
      </span></p></div></div></div></div>
    <script src="/spring-boot-primer/assets/js/5.a86f6d2d.js" defer></script><script src="/spring-boot-primer/assets/js/app.f4a996cb.js" defer></script>
  </body>
</html>
